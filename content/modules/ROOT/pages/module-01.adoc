= Section 2 - Remediation Workflow

== Objective

For this section, we will build another workflow called the **Remediation Workflow**. The goal for this workflow is to take the information we learned from Section 1 with RHEL AI and now prompt Ansible Lightspeed to automatically create an Ansible Playbook to fix the issue. By combining these two workflows, we can create an AIOps workflow capable of self-healing infrastructure.

image::remediation_workflow.png[remediation_workflow]

By separating these two parts into distinct workflows, we allow for manual review of the response from RHEL AI and can take corrective action if necessary. This creates a natural stopping point in our automation workflow where we can ensure the automation is performing as expected.

[quote]
‚ö†Ô∏è Before we get started you need to make sure you have run the first workflow.

[quote]
‚ö†Ô∏è Reminder that the way we purposely broke httpd with the *‚ùå Break Apache* Job Template was by inserting *InvalidDirectiveHere* into the configuration file and restarting the service.  This crashed httpd service as you can see by running the *systemctl status httpd.service* Linux command.

== Guide

1. Log in to the web UI for Ansible Automation Platform if you are not already logged in.
2. In the left navigation menu, click on *Automation Execution* ‚Üí *Templates*.

image::automation_execution_templates.png[automation_execution_templates]

[start=3]
3. Click the blue *Create template* button, then select **Create workflow job template**.

image::create_workflow.png[create_workflow,300]

[start=4]
4. Fill out the following values

[options="header"]
|===
| Parameter | Value
| Name | Remediation Workflow
| Organization | Default
|===

[start=5]
5. Click the blue *Create workflow job template* button

image::create_workflow_job_template.png[create_workflow_job_template,300]

You will get a window that looks like this:

image::currently_no_nodes_workflow.png[currently_no_nodes_workflow,400]

[start=6]
6. Click on the blue *Add step*

7. Fill out the following values

[options="header"]
|===
| Parameter | Value
| Node type | Job Template
| Job Template | üß† Lightspeed Remediation Playbook Generator
| Convergence | Any
| Node alias | (You can leave this blank)
|===

image::add_step_lightspeed_remedation.png[add_step_lightspeed_remedation,500]

[start=8]
8. Click on the blue *Next*

image::blue_next_button.png[blue_next_button,150]

[quote]
‚ö†Ô∏è This is the really cool part!  There is two text boxes here.  The top one is the value we use to prompt Ansible Lightspeed to generate an Ansible Playbook.  This value was manualy created by the Ansible Tech Marketing team. The 2nd text box was dynamically created from the last workflow by Red Hat AI.  If you are happy with the Red Hat AI prompt, feel free to copy and paste it over the first text box to test out the solution.  By seperating AIOps into two workflows, it gives us (the administrator) the ability to review AI responses for accuracy before we deploy the next woorkflow!

[start=9]
9. Modify the first text box with the Red Hat AI solution. Feel free to change the prompt to anything you want.
