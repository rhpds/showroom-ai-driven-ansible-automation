= Section 3 - Summary and Call to Actions

You have completed the lab. This section will help you go further by documenting all the Ansible Playbooks and showing you how they work.



























== Summary of Job Templates

Here's a recap of the job templates used in the lab:
(in alphabetical order):

|===
| Name | Purpose
| `‚öôÔ∏è Apache Service Status Check` | Checks the current state of Apache
| `‚ùå Break Apache` | Simulates a failure in the Apache config
| `ü§ñ RHEL AI: Analyze Incident` | Uses RHEL AI to understand the error
| `üì£ Notify via Mattermost` | Sends incident details to a chat system
| `‚öôÔ∏è Build Ansible Lightspeed Job Template` | Creates a JT to generate playbooks
| `üß† Lightspeed Remediation Playbook Generator` | Uses Lightspeed to generate the fix
| `üßæ Commit Fix to Gitea` | Pushes the generated playbook to Git
| `‚öôÔ∏è Build HTTPD Remediation Template` | Creates JT to apply the AI-generated fix
| `‚úÖ Execute HTTPD Remediation` | Final fix (launched manually)
| `‚úÖ Restore Apache` | Restores Apache to a known-good config
|===


=== `‚öôÔ∏è Apache Service Status Check`

*Purpose:*
Checks whether Apache is active and logs its status.

*What it does:*

- Runs `systemctl status httpd`
- Collects output and logs it
- Output is consumed by the next steps (Red Hat AI and Mattermost)

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/systemd_check_status.yml[Github Link,window=_blank]

=== `‚ùå Break Apache`
*Purpose:* Introduces a known bad directive in `/etc/httpd/conf/httpd.conf` to cause Apache failure

*What happens next:*

- Filebeat detects the service issue
- Kafka forwards the event
- EDA rulebook matches and triggers `AI Insights and Lightspeed prompt generation` workflow

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/httpd_break.yml[Github Link,window=_blank]

=== `‚öôÔ∏è Build Ansible Lightspeed Job Template`

*Purpose:*

Creates a new job template with a survey that includes:

- A user-defined prompt field
- A pre-filled prompt from Red Hat AI output

*Why this is important:*

This allows Ansible Lightspeed to generate a remediation playbook without writing code manually. The job template created here will be used in the second workflow.

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/aap_create_job_template.yml[Github Link,window=_blank]

=== `‚öôÔ∏è Build HTTPD Remediation Template`

*Purpose:*
Creates a new job template that uses the playbook pushed by Ansible Lightspeed to fix the Apache (httpd) service.

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/httpd_remediation_job_template.yml[Github Link,window=_blank]

=== `üßæ Commit Fix to Gitea`

*Purpose:*
Pushes the generated playbook to the Gitea Git repository.

*What it does:*
- Authenticates with Gitea
- Commits `lightspeed-response.yml`
- Makes the playbook available for automation use

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/scm_pr.yml[Github Link,window=_blank]

== `Execute HTTPD Remediation`

*Purpose*
Fix httpd on the RHEL webserver

*What is does*
- Removes the bad syntax from the httpd configuration file
- Restarts the httpd service

*Ansible Playbook:*
This Job Template is dynamically generated from Ansible Lightspeed and stored in your Gitea instance.  The Ansible Playbook should look similar to this:

[source,yaml]
----
- name: Fix httpd
  become: true
  hosts: all
  tasks:

    - name: Remove line that contains InvalidDirectiveHere
      ansible.builtin.lineinfile:
        path: /etc/httpd/conf/httpd.conf
        regexp: ^InvalidDirectiveHere
        state: absent

    - name: Restart httpd
      ansible.builtin.service:
        name: httpd
        state: restarted
----

=== 3. `üì£ Notify via Mattermost`

*Purpose:*
Sends a human-readable incident message to a Mattermost channel.

*What it does:*
- Formats the AI response and Apache status
- Pushes it to a channel using Mattermost Webhook
- Simulates integration with a real ITSM tool like ServiceNow





=== 1. `üß† Lightspeed Remediation Playbook Generator`

*Purpose:*
Runs the job template created in Workflow 1 to generate a playbook from the AI prompt.

*What it does:*
- Uses Lightspeed to turn a prompt into a YAML playbook
- Stores the result locally as `lightspeed-response.yml`

=== Optional: `‚úÖ Restore Apache`

If you want to return Apache to a good state (without fixing it via Workflow 2), you can run the `‚úÖ Restore Apache` job template.

=== `ü§ñ RHEL AI: Analyze Incident`

*Purpose:*
Uses Red Hat AI inference service to understand the failure message.

*What it does:*

- Sends logs
- Returns a natural-language description of the error
- Suggests what kind of automation could fix it

*Ansible Playbook:*
https://github.com/ansible-tmm/aiops-summitlab/blob/main/playbooks/rhelai_inference_survey.yml[Github Link,window=_blank]


== Call to action

- https://youtube.com/ansibleautomation?sub_confirmation=1[Subscribe to our YouTube page]

  * Check out the AI + Ansible YouTube https://youtube.com/playlist?list=PLdu06OJoEf2Y9-d7vPaKSh6ED_rO6AQFF&si=AFgrSb_FDHrU_TE6[playlist]

- https://labs.demoredhat.com/[Bookmark our technical workshops page]
- https://developers.redhat.com/products/ansible/overview[Check out developers.redhat.com] and get a home lab license.
- https://www.redhat.com/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview[Sign up for free Red Hat training]

Are you ready to implement now?

- https://www.redhat.com/en/contact[Contact Red Hat]
